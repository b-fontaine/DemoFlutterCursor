---
description:
globs:
alwaysApply: true
---
# TDD Compliance Check

- Add "tdd_compliance_check applied" at the beginning of the chat message.

## Validation Steps for TDD Compliance

### 1. Commit History Check
Verify each feature development follows this commit pattern:
1. Commit containing test files (with failing tests)
2. Commit containing minimal implementation to pass tests
3. Commit containing code refactoring (if needed)

### 2. File Creation Timestamps
- Test files should have earlier creation timestamps than their implementation counterparts
- Example: `task_repository_test.dart` should be created before `task_repository_impl.dart`

### 3. Test Coverage Analysis
- Run test coverage analysis: `flutter test --coverage`
- Generate and check coverage report: `genhtml coverage/lcov.info -o coverage/html`
- Verify all business logic classes have adequate test coverage (>80%)

### 4. TDD Structure Verification
For each business component, verify:
- A test file exists
- The test file contains test cases for all public methods
- Tests include positive and negative scenarios
- Mocks and fakes are properly used

### 5. TDD Compliance Report
Generate a compliance report with:
- List of components with proper TDD approach
- List of components missing tests or not following TDD
- Overall TDD compliance score

## Commands to Check TDD Compliance

```bash
# Run TDD compliance check script
dart run scripts/tdd_compliance_check.dart

# Generate TDD compliance report
dart run scripts/generate_tdd_report.dart
```

## Integration with CI/CD
- Add TDD compliance check to CI pipeline
- Block merges for code that doesn't follow TDD approach
- Generate compliance reports as build artifacts

## TDD Compliance Checklist
Before marking a task as completed, verify:

- [ ] Repository layer:
  - [ ] Tests written first
  - [ ] Tests cover all methods
  - [ ] Tests include error cases
  
- [ ] Use case layer:
  - [ ] Tests written first
  - [ ] Tests cover different scenarios
  - [ ] Mocks are used for dependencies
  
- [ ] UI layer:
  - [ ] Widget tests exist
  - [ ] State management tests exist
  
- [ ] Integration:
  - [ ] End-to-end tests cover the feature
  - [ ] All tests pass
